[gd_scene load_steps=16 format=3 uid="uid://baawn2w8fbjpc"]

[ext_resource type="Script" uid="uid://c13owiby5n1lo" path="res://car_controller.gd" id="2_dd2be"]
[ext_resource type="Script" uid="uid://bt43365dp4iqv" path="res://follow_camera.gd" id="3_sl0jo"]
[ext_resource type="PackedScene" uid="uid://ddgje6t11apg3" path="res://wheel.tscn" id="3_t3gmr"]

[sub_resource type="Environment" id="Environment_sskuf"]

[sub_resource type="CameraAttributesPhysical" id="CameraAttributesPhysical_tpaj3"]

[sub_resource type="Compositor" id="Compositor_sskuf"]

[sub_resource type="BoxShape3D" id="BoxShape3D_sskuf"]
size = Vector3(1.5, 0.75, 3)

[sub_resource type="BoxMesh" id="BoxMesh_t3gmr"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_sskuf"]
albedo_color = Color(0.11119685, 0.11119685, 0.11119679, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_tpaj3"]

[sub_resource type="Skin" id="Skin_sskuf"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_dd2be"]
friction = 0.8
rough = true

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_dd2be"]
points = PackedVector3Array(-1, 0, -1, -1, 0, 1, 1, 0, -1, 1, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dd2be"]

[sub_resource type="TextMesh" id="TextMesh_t3gmr"]
material = SubResource("StandardMaterial3D_dd2be")
text = "â†’"
font_size = 32

[node name="Test Track" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_sskuf")
camera_attributes = SubResource("CameraAttributesPhysical_tpaj3")
compositor = SubResource("Compositor_sskuf")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 10, 0)

[node name="VehicleBody3D" type="VehicleBody3D" parent="."]
mass = 80.0
center_of_mass_mode = 1
script = ExtResource("2_dd2be")

[node name="CollisionShape3D" type="CollisionShape3D" parent="VehicleBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
shape = SubResource("BoxShape3D_sskuf")

[node name="MeshInstance3D" type="MeshInstance3D" parent="VehicleBody3D"]
transform = Transform3D(1.5, 0, 0, 0, 0.5, 0, 0, 0, 3, 0, 0, 0)
mesh = SubResource("BoxMesh_t3gmr")

[node name="VehicleWheel3D BR" type="VehicleWheel3D" parent="VehicleBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, -0.12, 1.2)
wheel_roll_influence = 0.8
wheel_friction_slip = 1.8
suspension_stiffness = 50.0

[node name="Wheel Mesh" parent="VehicleBody3D/VehicleWheel3D BR" instance=ExtResource("3_t3gmr")]

[node name="VehicleWheel3D FR" type="VehicleWheel3D" parent="VehicleBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, -0.12, -1.2)
use_as_traction = true
use_as_steering = true
wheel_roll_influence = 0.8
wheel_friction_slip = 2.0
suspension_stiffness = 50.0

[node name="Wheel Mesh" parent="VehicleBody3D/VehicleWheel3D FR" instance=ExtResource("3_t3gmr")]

[node name="VehicleWheel3D BL" type="VehicleWheel3D" parent="VehicleBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, -0.12, 1.2)
wheel_roll_influence = 0.8
wheel_friction_slip = 1.8
suspension_stiffness = 50.0

[node name="Wheel Mesh" parent="VehicleBody3D/VehicleWheel3D BL" instance=ExtResource("3_t3gmr")]

[node name="VehicleWheel3D FL" type="VehicleWheel3D" parent="VehicleBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, -0.12, -1.2)
use_as_traction = true
use_as_steering = true
wheel_roll_influence = 0.8
wheel_friction_slip = 2.0
suspension_stiffness = 50.0

[node name="Wheel Mesh" parent="VehicleBody3D/VehicleWheel3D FL" instance=ExtResource("3_t3gmr")]

[node name="Camera Node" type="Node3D" parent="."]
physics_interpolation_mode = 2
transform = Transform3D(1, 0, 0, 0, 0.96592575, 0.258819, 0, -0.258819, 0.96592575, 0, 0, 0)

[node name="Camera3D" type="Camera3D" parent="Camera Node" node_paths=PackedStringArray("target_vehicle")]
script = ExtResource("3_sl0jo")
target_vehicle = NodePath("../../VehicleBody3D")

[node name="Track" type="Node3D" parent="."]

[node name="Track Mesh" type="MeshInstance3D" parent="Track"]
transform = Transform3D(-1.0761828e-06, -1.1385604e-08, 5, -8.8446245, 1.4029901, -4.0649937e-08, -23.383167, -0.5306775, -2.1474338e-07, 0, -9.025788, -20)
material_override = SubResource("StandardMaterial3D_sskuf")
mesh = SubResource("PlaneMesh_tpaj3")
skin = SubResource("Skin_sskuf")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Track/Track Mesh"]
physics_interpolation_mode = 1
physics_material_override = SubResource("PhysicsMaterial_dd2be")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Track/Track Mesh/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_dd2be")

[node name="ArrowMesh 1" type="MeshInstance3D" parent="Track/Track Mesh"]
transform = Transform3D(0.9998874, 0.074047334, 0.010579933, 0.010581017, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, -0.4751284, -0.013030052, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="ArrowMesh 2" type="MeshInstance3D" parent="Track/Track Mesh"]
transform = Transform3D(0.9998876, 0.074047364, 0.010579935, 0.01058054, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, 0.00022923946, -0.021657228, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="ArrowMesh 3" type="MeshInstance3D" parent="Track/Track Mesh"]
transform = Transform3D(0.9998874, 0.07404734, 0.010579933, 0.010581017, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, 0.48353302, -0.013087988, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="Track Mesh2" type="MeshInstance3D" parent="Track"]
transform = Transform3D(6.305322, 0.06670791, 4.833246, -4.4918957, 1.4755868, 0.008112751, -23.771109, -0.2611391, 1.280493, 4.765967, -21.066563, -58.464897)
material_override = SubResource("StandardMaterial3D_sskuf")
mesh = SubResource("PlaneMesh_tpaj3")
skin = SubResource("Skin_sskuf")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Track/Track Mesh2"]
physics_interpolation_mode = 1
physics_material_override = SubResource("PhysicsMaterial_dd2be")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Track/Track Mesh2/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_dd2be")

[node name="ArrowMesh 1" type="MeshInstance3D" parent="Track/Track Mesh2"]
transform = Transform3D(0.9998874, 0.074047334, 0.010579933, 0.010581017, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, -0.4751284, -0.013030052, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="ArrowMesh 2" type="MeshInstance3D" parent="Track/Track Mesh2"]
transform = Transform3D(0.9998876, 0.074047364, 0.010579935, 0.01058054, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, 0.00022923946, -0.021657228, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="ArrowMesh 3" type="MeshInstance3D" parent="Track/Track Mesh2"]
transform = Transform3D(0.9998874, 0.07404734, 0.010579933, 0.010581017, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, 0.48353302, -0.013087988, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="Track Mesh3" type="MeshInstance3D" parent="Track"]
transform = Transform3D(-3.3434734, -0.03537267, 4.95368, -4.3412037, 1.4772115, 3.2567523e-15, -24.39211, -0.2580592, -0.67901033, 7.8536654, -29.862858, -101.36855)
material_override = SubResource("StandardMaterial3D_sskuf")
mesh = SubResource("PlaneMesh_tpaj3")
skin = SubResource("Skin_sskuf")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Track/Track Mesh3"]
physics_interpolation_mode = 1
physics_material_override = SubResource("PhysicsMaterial_dd2be")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Track/Track Mesh3/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_dd2be")

[node name="ArrowMesh 1" type="MeshInstance3D" parent="Track/Track Mesh3"]
transform = Transform3D(0.9998874, 0.074047334, 0.010579933, 0.010581017, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, -0.4751284, -0.013030052, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="ArrowMesh 2" type="MeshInstance3D" parent="Track/Track Mesh3"]
transform = Transform3D(0.9998876, 0.074047364, 0.010579935, 0.01058054, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, 0.00022923946, -0.021657228, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="ArrowMesh 3" type="MeshInstance3D" parent="Track/Track Mesh3"]
transform = Transform3D(0.9998874, 0.07404734, 0.010579933, 0.010581017, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, 0.48353302, -0.013087988, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="Track Mesh4" type="MeshInstance3D" parent="Track"]
transform = Transform3D(-17.282137, -0.039762963, 3.6104763, -2.7298841, 1.4875237, -0.34065473, -17.857082, -0.18892108, -3.4421523, -11.451762, -36.748123, -140.54616)
material_override = SubResource("StandardMaterial3D_sskuf")
mesh = SubResource("PlaneMesh_tpaj3")
skin = SubResource("Skin_sskuf")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Track/Track Mesh4"]
physics_interpolation_mode = 1
physics_material_override = SubResource("PhysicsMaterial_dd2be")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Track/Track Mesh4/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_dd2be")

[node name="ArrowMesh 1" type="MeshInstance3D" parent="Track/Track Mesh4"]
transform = Transform3D(0.9998874, 0.074047334, 0.010579933, 0.010581017, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, -0.4751284, -0.013030052, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="ArrowMesh 2" type="MeshInstance3D" parent="Track/Track Mesh4"]
transform = Transform3D(0.9998876, 0.074047364, 0.010579935, 0.01058054, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, 0.00022923946, -0.021657228, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")

[node name="ArrowMesh 3" type="MeshInstance3D" parent="Track/Track Mesh4"]
transform = Transform3D(0.9998874, 0.07404734, 0.010579933, 0.010581017, 0.00078319013, -0.99994355, -0.010578792, 6.999608, -4.712787e-08, 0.48353302, -0.013087988, 0.2707596)
mesh = SubResource("TextMesh_t3gmr")
